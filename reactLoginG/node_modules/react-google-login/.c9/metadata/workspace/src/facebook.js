{"filter":false,"title":"facebook.js","tooltip":"/src/facebook.js","undoManager":{"mark":4,"position":4,"stack":[[{"start":{"row":0,"column":0},"end":{"row":88,"column":0},"action":"remove","lines":["import React, { PropTypes } from 'react';","import styles from '../styles/facebook.scss';","","class FacebookLogin extends React.Component {","","  static propTypes = {","    callback: PropTypes.func.isRequired,","    appId: PropTypes.string.isRequired,","    xfbml: PropTypes.bool,","    scope: PropTypes.string,","    textButton: PropTypes.string,","    autoLoad: PropTypes.bool,","    size: PropTypes.string,","    fields: PropTypes.string,","  };","","  static defaultProps = {","    textButton: 'Login with Facebook',","    scope: 'public_profile, email',","    xfbml: false,","    size: 'medium',","    fields: 'name',","  };","","  constructor(props) {","    super(props);","  }","","  componentDidMount() {","    window.fbAsyncInit = () => {","      FB.init({","        appId: this.props.appId,","        xfbml: this.props.xfbml,","        version: 'v2.3',","      });","","      if (this.props.autoLoad) {","        FB.getLoginStatus(this.checkLoginState);","      }","    };","","    // Load the SDK asynchronously","    ((d, s, id) => {","      const element = d.getElementsByTagName(s)[0];","      const fjs = element;","      let js = element;","      if (d.getElementById(id)) {return;}","      js = d.createElement(s); js.id = id;","      js.src = '//connect.facebook.net/en_US/sdk.js';","      fjs.parentNode.insertBefore(js, fjs);","    }(document, 'script', 'facebook-jssdk'));","  }","","  responseApi = (authResponse) => {","    FB.api('/me', { fields: this.props.fields }, (me) => {","      me.accessToken = authResponse.accessToken;","      this.props.callback(me);","    });","  };","","  checkLoginState = (response) => {","    if (response.authResponse) {","      this.responseApi(response.authResponse);","    } else {","      if (this.props.callback) {","        this.props.callback({ status: response.status });","      }","    }","  };","","  click = () => {","    FB.login(this.checkLoginState, { scope: this.props.scope });","  };","","  render() {","    return (","      <div>","        <button className={'kep-login-facebook kep-login-facebook-' + this.props.size} onClick={this.click}>","            {this.props.textButton}","        </button>","        <style dangerouslySetInnerHTML={{ __html: styles }}></style>","        <div id=\"fb-root\"></div>","      </div>","    );","  }","}","","export default FacebookLogin;",""],"id":2},{"start":{"row":0,"column":0},"end":{"row":84,"column":0},"action":"insert","lines":["import React, { PropTypes } from 'react';","","","class GoogleLogin extends React.Component {","","  static propTypes = {","    callback: PropTypes.func.isRequired,","    clientId: PropTypes.string.isRequired,","    textButton: PropTypes.string,","    offline: PropTypes.bool,","    scope: PropTypes.string,","    cssClass: PropTypes.string","  };","","","  static defaultProps = {","    textButton: 'Login with Google',","    scope: 'profile email',","  };","","  constructor(props) {","    super(props);","  }","","  componentDidMount() {","    (function(d, s, id, cb) {","      const element = d.getElementsByTagName(s)[0];","      const fjs = element;","      let js = element;","      if (d.getElementById(id)) {","        return;","      }","      js = d.createElement(s);","      js.id = id;","      js.src = '//apis.google.com/js/platform.js';","      fjs.parentNode.insertBefore(js, fjs);","      js.onload = cb;","    }(document, 'script', 'google-login', () => {","      const params = {","        client_id: this.props.clientId,","        cookiepolicy: 'single_host_origin'","      }","      window.gapi.load('auth2', () => {","        gapi.auth2.init(params);","      });","    }));","  }","","  onBtnClick() {","    const auth2 = window.gapi.auth2.getAuthInstance();","    if (this.props.offline) {","      let options = {","        'scope': this.props.scope,","        'redirect_uri': 'postmessage'","      }","      auth2.grantOfflineAccess(options).then((data) => {","        this.props.callback(data)","      });","","    } else {","      auth2.signIn()","        .then(() => {","            if (auth2.isSignedIn.get()) {","              var profile = auth2.currentUser.get().getBasicProfile();","              this.props.callback(profile);","            }","          }","","        );","    }","  }","","  render() {","    return (","      <div>","        <button className={this.props.cssClass} onClick={this.onBtnClick.bind(this)}>","          {this.props.buttonText}","        </button>","    </div>","    );","  }","}","","export default GoogleLogin;",""]}],[{"start":{"row":3,"column":26},"end":{"row":3,"column":32},"action":"remove","lines":["React."],"id":3}],[{"start":{"row":0,"column":25},"end":{"row":0,"column":26},"action":"insert","lines":[","],"id":4}],[{"start":{"row":0,"column":26},"end":{"row":0,"column":27},"action":"insert","lines":[" "],"id":5}],[{"start":{"row":0,"column":27},"end":{"row":0,"column":36},"action":"insert","lines":["Component"],"id":6}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":7,"column":42},"end":{"row":7,"column":42},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1456801193324,"hash":"f9cc5853ced620fb6675b8b9ecbdddc03adbe4ad"}